<!doctype html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

  <title>Web Programming School - Node.js</title>

  <link rel="stylesheet" href="css/reveal.css">
  <link rel="stylesheet" href="css/theme/blood.css">

  <!-- Theme used for syntax highlighting of code -->
  <link rel="stylesheet" href="lib/css/zenburn.css">

  <!-- Printing and PDF exports -->
  <script>
    var link = document.createElement('link');
    link.rel = 'stylesheet';
    link.type = 'text/css';
    link.href = window.location.search.match(/print-pdf/gi) ? 'css/print/pdf.css' : 'css/print/paper.css';
    document.getElementsByTagName('head')[0].appendChild(link);
  </script>
</head>

<body>
  <div class="reveal">
    <div class="slides">
      <section>
        <h1>Access Token &amp; JWT</h1>
      </section>
      <section>
        <h1>쿠키의 단점</h1>
        <ul>
          <li>웹 브라우저에서 밖에 사용할 수 없음 (모바일 앱...?)</li>
          <li>CORS 대응이 복잡함</li>
        </ul>
      </section>
      <section>
        <h1>Access Token</h1>
        사용자의 자격증명(아이디, 패스워드)
        bearer token
        id, password를 사용하지 않는 이유
      </section>
      <section>
        <h1>Web Storage</h1>
        localStorage
        sessionStorage
        쿠키 대비 용량도 크고 쓰기도 편하다...
        쿠키는 서버의 응답에 의해 쓰기가 이루어지고 localStorage는 클라이언트 측 자바스크립트에 의해 쓰기가 이루어진다는 차이점이 있음
      </section>
      <section>
        웹에서의 JWT 사용
        <p><img src="https://cdn.auth0.com/content/jwt/jwt-diagram.png" alt=""></p>
      </section>
      <section>
        <h1>Access Token 예제</h1>
        <h1>Axios Instance</h1>
      </section>
      <section>
        <h1>보안 상 주의사항</h1>
        악의적인 공격자가 웹사이트에 스크립트를 삽입하는 공격(XSS)에 노출되지 않도록 신경써야 함
        직접 DOM API를 사용하는 대신 EJS, React 같은 템플릿 언어를 사용하기만 해도 XSS에 대한 방어는 충분함
      </section>
      <section>
        <h1>JWT</h1>
        JSON Web Token
        최근 널리 사용되고 있는 액세스 토큰 형식
        토큰 안에 정보가 들어있다는 특징이 있음 - 데이터베이스에 토큰을 저장하는 시스템에서는 사용자가 누군지 확인하기 위해 데이터베이스를 읽어올 필요가 있는데, JWT를 사용하면 토큰 안에 정보가 들어있어서 데이터베이스에 접근하지 않고도 인증이 가능해짐
        서명을 통해 조작을 방지함
        유효기간
        https://jwt.io/introduction/
        https://stormpath.com/blog/where-to-store-your-jwts-cookies-vs-html5-web-storage
        https://blog.outsider.ne.kr/1160
        https://velopert.com/2448
      </section>
      <section>
        <h1>JWT 예제</h1>
        <p><a target="_blank" href="https://glitch.com/edit/#!/wpsn-jwt-example">Link</a></p>
      </section>
      <section>
        <h1>JWT 보안</h1>
        <ul>
          <li>일반 HTTP 요청으로는 토큰이 그대로 노출되기 때문에 반드시 HTTPS를 사용해야 함</li>
          <li>JWT 안의 내용은 그대로 열어볼 수 있기 때문에 민감한 정보를 저장하면 안 됨</li>
          <li>토큰의 유효기간을 짧게 하면 토큰이 유출되었을 때를 대비할 수 있음. 대신 이 때는 만료된 토큰을 수동으로 갱신해주는 작업이 필요함 (토큰을 갱신하기 위해 사용하는 refresh token을 따로 두기도 함)</li>
        </ul>
      </section>
      <section>
        <h1>Next</h1>
        <p><a href="2-2-4-fetch.html">Fetch API</a></p>
      </section>
    </div>
  </div>

  <script src="lib/js/head.min.js"></script>
  <script src="js/reveal.js"></script>

  <script>
      // More info about config & dependencies:
      // - https://github.com/hakimel/reveal.js#configuration
      // - https://github.com/hakimel/reveal.js#dependencies
      Reveal.initialize({
        dependencies: [
          { src: 'plugin/markdown/marked.js' },
          { src: 'plugin/markdown/markdown.js' },
          { src: 'plugin/notes/notes.js', async: true },
          { src: 'plugin/highlight/highlight.js', async: true, callback: function () { hljs.initHighlightingOnLoad(); } }
        ]
      });
  </script>
</body>

</html>
